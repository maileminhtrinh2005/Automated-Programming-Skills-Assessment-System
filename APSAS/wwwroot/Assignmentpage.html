
Ôªø<!doctype html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <title>APSAS Feedback ‚Ä¢ Tester</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- NgƒÉn tr√¨nh duy·ªát g·ªçi /favicon.ico -->
    <link rel="icon" href="data:,">
    <style>
        body {
            font-family: system-ui,Arial;
            background: #f8fafc;
            margin: 28px auto;
            max-width: 920px;
            padding: 20px
        }

        h1 {
            text-align: center;
            color: #2563eb;
            margin: 0 0 8px
        }

        label {
            font-weight: 600;
            display: block;
            margin-top: 12px
        }

        textarea {
            width: 100%;
            padding: 10px;
            margin-top: 6px;
            border-radius: 10px;
            border: 1px solid #cbd5e1;
            font-family: ui-monospace,Menlo,Consolas,monospace;
            min-height: 160px
        }

        .row {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 14px 0
        }

        button {
            flex: 1;
            min-width: 140px;
            border: 0;
            border-radius: 10px;
            padding: 12px 14px;
            color: #fff;
            font-weight: 700;
            cursor: pointer
        }

        #btnHealth {
            background: #059669
        }

        #btnSubmit {
            background: #2563eb
        }

        #btnManual {
            background: #7c3aed
        }

        #btnClear {
            background: #dc2626
        }

        pre {
            background: #0b1220;
            color: #e2e8f0;
            padding: 14px;
            border-radius: 12px;
            white-space: pre-wrap;
            word-break: break-word;
            font-size: 14px
        }
    </style>
</head>
<body>
    <h1>APSAS Feedback ‚Ä¢ Gateway 5261</h1>

    <label>Request Body (POST /feedback/submit)</label>
    <textarea id="body">{
  "studentId": "SV001",
  "assignmentTitle": "Two Sum",
  "rubric": "ƒê√∫ng 60, Hi·ªáu nƒÉng 20, Style 20",
  "sourceCode": "// code c·ªßa sinh vi√™n...",
  "languageId": 52,
  "testResults": [
    { "name": "Case 1", "status": "Passed", "input": "[2,7,11,15], 9", "expected": "[0,1]", "actual": "[0,1]" },
    { "name": "Case 2", "status": "Failed", "input": "[3,2,4], 6", "expected": "[1,2]", "actual": "[]" }
  ]
}</textarea>

    <div class="row">
        <button id="btnHealth">ü©∫ GET /feedback/health</button>
        <button id="btnSubmit">üì§ POST /feedback/submit</button>
        <button id="btnManual">‚úçÔ∏è POST /feedback/manual</button>
        <button id="btnClear">üóëÔ∏è Clear</button>
    </div>

    <label>K·∫øt qu·∫£</label>
    <pre id="out">(ch∆∞a c√≥ k·∫øt qu·∫£)</pre>

    <script>
        const out = document.querySelector('#out');
        const gw = "http://localhost:5261"; // C·ªë ƒë·ªãnh Gateway 5261
        const url = p => gw + (p.startsWith('/') ? p : '/' + p);

        async function call(u, m = 'GET', d = null) {
            out.textContent = `${m} ${u}\n...`;
            const o = { method: m, headers: {} };
            if (d) { o.headers['Content-Type'] = 'application/json'; o.body = JSON.stringify(d); }
            try {
                const r = await fetch(u, o);
                const t = await r.text();
                try { out.textContent = `${m} ${u}\nStatus: ${r.status}\n\n` + JSON.stringify(JSON.parse(t), null, 2); }
                catch { out.textContent = `${m} ${u}\nStatus: ${r.status}\n\n${t}`; }
            } catch (e) { out.textContent = `${m} ${u}\nERROR: ${e}`; }
        }

        document.querySelector('#btnHealth').onclick = () => call(url('/feedback/health'));
        document.querySelector('#btnSubmit').onclick = () => {
            try {
                const d = JSON.parse(document.querySelector('#body').value);
                call(url('/feedback/submit'), 'POST', d);
            } catch (e) { out.textContent = '‚ùå JSON body kh√¥ng h·ª£p l·ªá: ' + e.message; }
        };
        document.querySelector('#btnManual').onclick = () => {
            const d = { studentId: "SV003", assignmentTitle: "Sorting Algorithm", instructorId: "GV002", score: 85, content: "B√†i l√†m ·ªïn, c·∫ßn t·ªëi ∆∞u th√™m." };
            document.querySelector('#body').value = JSON.stringify(d, null, 2);
            call(url('/feedback/manual'), 'POST', d);
        };
        document.querySelector('#btnClear').onclick = () => { document.querySelector('#body').value = ""; out.textContent = "(ƒë√£ xo√°)"; };
Ôªø<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Test Assignment API</title>
</head>
<body style="font-family: sans-serif;">
    <h2>üß© Test Assignment API qua Gateway</h2>

    <!-- Th√™m b√†i t·∫≠p m·ªõi -->
    <h3>Th√™m b√†i t·∫≠p m·ªõi</h3>
    <form id="addForm">
        <label>Title: <input type="text" id="title" required></label><br><br>
        <label>Description: <input type="text" id="description" required></label><br><br>
        <label>Deadline: <input type="datetime-local" id="deadline" required></label><br><br>
        <label>
            Difficulty:
            <select id="difficulty">
                <option>Easy</option>
                <option>Medium</option>
                <option>Hard</option>
            </select>
        </label><br><br>
        <button type="submit">Th√™m Assignment</button>
    </form>

    <hr>

    <!-- L·∫•y Assignment theo ID -->
    <h3>L·∫•y Assignment theo ID</h3>
    <label>ID: <input type="number" id="getId" required></label>
    <button id="getBtn">L·∫•y Assignment</button>

    <hr>

    <!-- C·∫≠p nh·∫≠t Assignment -->
    <h3>C·∫≠p nh·∫≠t Assignment</h3>
    <label>ID: <input type="number" id="updateId" required></label><br><br>
    <label>Title: <input type="text" id="updateTitle"></label><br><br>
    <label>Description: <input type="text" id="updateDescription"></label><br><br>
    <label>Deadline: <input type="datetime-local" id="updateDeadline"></label><br><br>
    <label>
        Difficulty:
        <select id="updateDifficulty">
            <option>Easy</option>
            <option>Medium</option>
            <option>Hard</option>
        </select>
    </label><br><br>
    <button id="updateBtn">C·∫≠p nh·∫≠t Assignment</button>

    <hr>

    <!-- X√≥a Assignment -->
    <h3>X√≥a Assignment</h3>
    <label>ID: <input type="number" id="deleteId" required></label>
    <button id="deleteBtn">X√≥a Assignment</button>

    <hr>

    <pre id="result"></pre>

    <script>
        const baseUrl = "http://localhost:5261";

        // Th√™m
        document.getElementById("addForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            const data = {
                title: document.getElementById("title").value,
                description: document.getElementById("description").value,
                deadline: document.getElementById("deadline").value,
                difficulty: document.getElementById("difficulty").value
            };

            const res = await fetch(`${baseUrl}/AddAssignment`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            });

            document.getElementById("result").textContent = res.ok
                ? "‚úÖ Th√™m th√†nh c√¥ng!"
                : "‚ùå L·ªói khi th√™m assignment!";
        });

        // L·∫•y
        document.getElementById("getBtn").addEventListener("click", async () => {
            const id = document.getElementById("getId").value;
            const res = await fetch(`${baseUrl}/GetAssignmentByid/${id}`);

            if (!res.ok) {
                document.getElementById("result").textContent = "‚ùå Kh√¥ng t√¨m th·∫•y Assignment!";
                return;
            }

            const data = await res.json();
            document.getElementById("result").textContent = JSON.stringify(data, null, 2);
        });

        // C·∫≠p nh·∫≠t
        document.getElementById("updateBtn").addEventListener("click", async () => {
            const data = {
                assignmentId: document.getElementById("updateId").value,
                title: document.getElementById("updateTitle").value,
                description: document.getElementById("updateDescription").value,
                deadline: document.getElementById("updateDeadline").value,
                difficulty: document.getElementById("updateDifficulty").value
            };

            const res = await fetch(`${baseUrl}/UpdateAssignment`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            });

            document.getElementById("result").textContent = res.ok
                ? "‚úÖ C·∫≠p nh·∫≠t th√†nh c√¥ng!"
                : "‚ùå L·ªói khi c·∫≠p nh·∫≠t assignment!";
        });

        // X√≥a
        document.getElementById("deleteBtn").addEventListener("click", async () => {
            const id = document.getElementById("deleteId").value;
            const res = await fetch(`${baseUrl}/Delete/${id}`, {
                method: "DELETE"
            });

            document.getElementById("result").textContent = res.ok
                ? "‚úÖ X√≥a th√†nh c√¥ng!"
                : "‚ùå L·ªói khi x√≥a assignment!";
        });

    </script>
</body>
</html>
